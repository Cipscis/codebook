(()=>{"use strict";const t=Object.freeze({block:".js-codebook__block",set:".js-codebook__set",inert:".js-codebook__inert"}),e=Object.freeze({set:"data-codebook-set",index:"data-codebook-index",log:"data-codebook-log",html:"data-codebook-html"}),n="default",o=document.createElement("textarea");function l(t){return new Promise(((e,n)=>{const o=c(t),l=[];for(let t in o){const e=o[t];l.push(u(e))}Promise.all(l).then(e).catch(n)}))}function c(n){const o=function(e){const n=document.querySelectorAll(t.block),o=[],l={};for(let t of n){const n=i(t);let c;o.includes(n)?c=l[n]:(o.push(n),c=r(e),l[n]=c),c.blocks.push(t)}return l}(n);for(let t in o)o[t].blocks.sort(((t,n)=>{const o=t.getAttribute(e.index),l=n.getAttribute(e.index);return o===l?0:null!==o&&null===l?-1:null===o&&null!==l?1:+o-+l}));return o}function r(t){return t=t||{},{blocks:[],args:Object.assign({},t)}}function u(t){const n=t.blocks.reduce(s,"");!function(t){for(let n of t.blocks){const t=n.getAttribute(e.log);if(t){const e=document.getElementById(`${t}`);e&&(e.innerHTML="")}}}(t);const o=t.args,[l,c]=function(t){return[Object.keys(t),Object.values(t)]}(o);if(console.log(l),l.includes("_log")||l.includes("_$log")||l.includes("log")||l.includes("_html")||l.includes("_$html")||l.includes("html"))throw new Error("Codebook: The following argument names are reserved and cannot be used:\n'_log', '_$log', 'log', '_html', '_$html', 'html'");return Function.apply(null,l.concat(["_log","_html",`\n\t\treturn async () => {\n\t\t\t'use strict';\n\n\t\t\tlet _$log = null;\n\t\t\tlet log = function () {};\n\n\t\t\tlet _$html = null;\n\t\t\tlet html = function () {};\n\n\t\t\t${n}\n\t\t};\n\t`])).apply(null,c.concat([g,d]))()}function s(t,n){let l=(c=n.textContent||"",o.innerHTML=c,o.value);var c;const r=n.getAttribute(e.log);r&&(l=`\n\t\t\t_$log = document.getElementById('${r}');\n\t\t\tlog = function (...output) {\n\t\t\t\t_log(_$log, ...output);\n\t\t\t};\n\n\t\t\t${l}\n\n\t\t\tlog = function () {};\n\t\t`);const u=n.getAttribute(e.html);return u&&(l=`\n\t\t\t_$html = document.getElementById('${u}');\n\t\t\thtml = function (output) {\n\t\t\t\t_html(_$html, output);\n\t\t\t};\n\n\t\t\t${l}\n\n\t\t\thtml = function () {};\n\t\t`),`${t}\n${l}`}function i(o){let l=o.getAttribute(e.set);if(!l){const c=o.closest(t.set);c&&(l=c.getAttribute(e.set)),l||(l=n)}return l}function g(t,...e){t&&e.forEach((e=>{let n;if(e instanceof Date){function o(t,e=2){let n=t.toString();for(;n.length<e;)n=`0${n}`;return n}n=`${e.getFullYear()}-${o(e.getMonth()+1)}-${o(e.getDate())}`,(e.getHours()||e.getMinutes()||e.getSeconds())&&(n+=` ${o(e.getHours())}:${o(e.getMinutes())}:${o(e.getSeconds())}`)}else n="object"==typeof e?JSON.stringify(e,null,"\t"):"string"==typeof e?e:""+e;t.innerHTML+=`${n}\n`}))}function d(t,e){t&&(t.innerHTML=e)}!function(){const e=document.querySelectorAll(`${t.block}, ${t.inert}`);for(let t of e){const e=t.innerHTML,n=e.match(/^(\t*)\S/m);if(n){const o=n[1].length,l=new RegExp(`^\\t{${o}}`,"gm");t.innerHTML=e.replace(l,"").trim()}}}(),l({testArg:"test"}),document.querySelector(".js-run-test-set")?.addEventListener("click",(()=>async function(t,e){let n,o;n=t,e&&(o=e);const l=c(o);if(n in l)return u(l[n]);throw new RangeError(`Codebook: Cannot run unrecognised set '${n}'`)}("test",{testArg:"test"}))),document.querySelector(".js-run-all-sets")?.addEventListener("click",(()=>l({testArg:"test"})))})();
//# sourceMappingURL=docs-script.bundle.js.map