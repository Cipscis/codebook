!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const o=Object.freeze({code:".js-codebook__code",set:".js-codebook__set",inert:".js-codebook__inert"}),r=Object.freeze({set:"data-codebook-set",index:"data-codebook-index",log:"data-codebook-log",html:"data-codebook-html"}),u=document.createElement("textarea"),l=Object.getPrototypeOf((async function(){})).constructor,c={run:function(t){return new Promise((e,n)=>{let o=c._createCodeSets(t),r=[];o.global&&r.push(c._runGlobalSet(o.global));for(let t in o){if("global"===t)continue;let e=o[t];r.push(c._runSet(e))}Promise.all(r).then(e).catch(n)})},runSet:async function(t,e){let n=c._createCodeSets(e);if(t in n){let e=n[t];return"global"===t?c._runGlobalSet(e):c._runSet(e)}throw new RangeError(`Codebook: Cannot run unrecognised set '${t}'`)},tidy:function(){let t=document.querySelectorAll(`${o.code}, ${o.inert}`);for(let e of t){let t=e.innerHTML,n=t.match(/^(\t*)\S/m);if(n){let o=n[1].length,r=new RegExp(`^\\t{${o}}`,"gm");e.innerHTML=t.replace(r,"").trim()}}},_createCodeSets:function(t){let e=c._gatherSetBlocks(t);for(let t in e){let n=e[t];c._sortCodeBlocks(n)}return e},_gatherSetBlocks:function(t){let e=document.querySelectorAll(o.code),n=[],r={};for(let o of e){let e,u=c._getSetName(o);-1===n.indexOf(u)?(n.push(u),e=c._newSet(t),r[u]=e):e=r[u],e.code.push(o)}return r},_sortCodeBlocks:function(t){t.code.sort((t,e)=>{let n=t.getAttribute(r.index),o=e.getAttribute(r.index);return n===o?0:null!==n&&null===o?-1:null===n&&null!==o?1:n-o})},_newSet:function(t){return t=t||{},{code:[],args:Object.assign({},t)}},_runGlobalSet:function(t){let e=t.code.reduce(c._combineCode,"");return new l(e)()},_runSet:function(t){let e=t.code.reduce(c._combineCode,"");c._clearLogs(t);let n=t.args,[o,r]=c._spreadArgs(n);return Function.apply(null,o.concat(["_log","_html",`\n\t\t\treturn async () => {\n\t\t\t\t'use strict';\n\n\t\t\t\tlet _$log = null;\n\t\t\t\tlet log = function () {};\n\n\t\t\t\tlet _$html = null;\n\t\t\t\tlet html = function () {};\n\n\t\t\t\t${e}\n\t\t\t};\n\t\t`])).apply(null,r.concat([c._logOutput,c._htmlOutput]))()},_clearLogs:function(t){for(let e of t.code){let t=e.getAttribute(r.log);if(t){let e=document.getElementById(""+t);e&&(e.innerHTML="")}}},_spreadArgs:function(t){let e=[],n=[];for(let o in t){let r=t[o];e.push(o),n.push(r)}return[e,n]},_combineCode:function(t,e){let n=c._decodeHtml(e.innerHTML),o=e.getAttribute(r.log);o&&(n=`\n\t\t\t\t_$log = document.getElementById('${o}');\n\t\t\t\tlog = function (...output) {\n\t\t\t\t\t_log(output, _$log);\n\t\t\t\t};\n\n\t\t\t\t${n}\n\n\t\t\t\tlog = function () {};\n\t\t\t`);let u=e.getAttribute(r.html);return u&&(n=`\n\t\t\t\t_$html = document.getElementById('${u}');\n\t\t\t\thtml = function (output) {\n\t\t\t\t\t_html(output, _$html);\n\t\t\t\t};\n\n\t\t\t\t${n}\n\n\t\t\t\thtml = function () {};\n\t\t\t`),`${t}\n${n}`},_getSetName:function(t){let e=t.getAttribute(r.set);if(!e){let n=t.closest(o.set);n&&(e=n.getAttribute(r.set)),e||(e="default")}return e},_logOutput:function(t,e){if(e){if(Array.isArray(t))return void t.forEach(t=>c._logOutput(t,e));let n;t instanceof Date?(n=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`,(t.getHours()||t.getMinutes()||t.getSeconds())&&(n+=` ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`)):n="object"==typeof t?JSON.stringify(t,null,"\t"):t,e.innerHTML+=n+"\n"}},_htmlOutput:function(t,e){e&&(e.innerHTML=t)},_decodeHtml:function(t){return u.innerHTML=t,u.value}};var i={run:c.run,runSet:c.runSet,tidy:c.tidy};i.tidy(),i.run({testArg:"test"})}]);
//# sourceMappingURL=bundle.js.map